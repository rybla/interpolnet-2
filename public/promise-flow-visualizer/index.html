<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promise Flow Visualizer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>Promise Flow Visualizer</h1>
      <p>Map asynchronous JavaScript promises as branching paths that glow green upon resolution or red upon rejection to trigger downstream clauses.</p>
      <div class="controls">
        <button id="run-btn">Run Flow</button>
        <button id="reset-btn">Reset</button>
      </div>
    </header>

    <main>
      <div id="visualization">
        <svg id="graph-svg" width="100%" height="100%">
          <defs>
            <marker id="arrow-resolve" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
              <path d="M 0 0 L 10 5 L 0 10 z" fill="#00ffcc" />
            </marker>
            <marker id="arrow-reject" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
              <path d="M 0 0 L 10 5 L 0 10 z" fill="#ff0044" />
            </marker>
            <marker id="arrow-pending" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
              <path d="M 0 0 L 10 5 L 0 10 z" fill="#445566" />
            </marker>
            <!-- Filters for glowing effects -->
            <filter id="glow-resolve" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="3" result="blur" />
              <feComposite in="SourceGraphic" in2="blur" operator="over" />
            </filter>
            <filter id="glow-reject" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="3" result="blur" />
              <feComposite in="SourceGraphic" in2="blur" operator="over" />
            </filter>
          </defs>
          <g id="edges"></g>
          <g id="nodes"></g>
        </svg>
      </div>

      <aside id="code-panel">
        <h3>Equivalent Code</h3>
        <pre><code id="code-block">
fetchData()
  .then(processData)
  .then(displayData)
  .catch(handleError)
  .finally(cleanup);
        </code></pre>
      </aside>
    </main>
  </div>
  <script src="script.js"></script>
</body>
</html>